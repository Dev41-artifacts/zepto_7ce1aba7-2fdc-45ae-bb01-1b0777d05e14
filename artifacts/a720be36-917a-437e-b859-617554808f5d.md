# Zepto Logistics System Data Flow

## Overview
The logistics system for Zepto involves managing food orders, user profiles, delivery tracking, and real-time updates. This document provides a detailed description of the data flows within the system, highlighting the sources of data, the transformations it undergoes, storage methods, and consumption patterns.

---

## Data Sources

1. **Food Orders**  
   - Source: User mobile application/web portal  
   - Format: JSON (Order ID, User ID, Item IDs, Quantities, Delivery Address, Timestamp)

2. **User Profiles**  
   - Source: User registration and profile management  
   - Format: JSON (User ID, Name, Email, Phone Number, Address, Preferences)

3. **Delivery Tracking**  
   - Source: GPS and delivery personnel's mobile app  
   - Format: JSON (Order ID, Delivery Personnel ID, Current Location, Estimated Time of Arrival)

4. **Real-time Updates**  
   - Source: Various system components (Order system, Delivery system)  
   - Format: WebSocket or Event Streams (Order Status, Delivery Status)

---

## Data Transformations

1. **Food Orders**  
   - Validation: Check for stock availability  
   - Enrichment: Calculate total price including taxes and discounts  
   - Status Update: Initial set to 'Pending'

2. **User Profiles**  
   - Validation: Email format check and address validation  
   - Normalization: Standardize address formats and phone number formats

3. **Delivery Tracking**  
   - Update Location: Process GPS data every few seconds  
   - Calculate ETA: Use algorithms to estimate delivery time based on traffic conditions

4. **Real-time Updates**  
   - Change Event Generation: Create events for order updates, status changes, and delivery notifications  
   - Format Transformation: Convert events to user-readable notifications for the application

---

## Data Storage

1. **Database for Food Orders**  
   - Type: Relational Database (e.g., PostgreSQL)  
   - Tables: Orders, Items, Order_Status  
   - Data retention policy: Keep data for 2 years for analytics purposes

2. **Database for User Profiles**  
   - Type: NoSQL Database (e.g., MongoDB)  
   - Collections: Users, Preferences  
   - Data retention policy: Permanent storage, with anonymization after 5 years

3. **Data Warehouse for Delivery Tracking**  
   - Type: Data Warehouse (e.g., BigQuery)  
   - Data sources: Aggregate delivery tracking data for analytics  
   - Data retention policy: 1 year, with daily aggregation

4. **Real-time Notification System**  
   - Type: Pub/Sub messaging system (e.g., Kafka)  
   - Data retention policy: Temporary, store messages for a limited time (e.g., 30 minutes)

---

## Consumption Patterns

1. **End-users (Customers)**  
   - Access: Mobile application interface to place orders and receive updates  
   - Data Consumption: Real-time notifications about order status, delivery tracking information

2. **Delivery Personnel**  
   - Access: Mobile application interface for receiving delivery assignments and tracking GPS  
   - Data Consumption: Current orders, delivery details, navigation instructions

3. **Administrators**  
   - Access: Web dashboard for order management and user profile updates  
   - Data Consumption: Analytical reports on order frequency, delivery performance, and user engagement

4. **Data Analysts**  
   - Access: Data warehouse and aggregated reports  
   - Data Consumption: Historical data analysis for strategic decision-making

---

## ASCII Art Data Flow Diagram

```
  +-----------------+          +---------------------+
  |    User App     | ------->|   Order Processing  |
  |  (iOS/Android)  |          +---------------------+
  +-----------------+          |                     |
                              |                     v
                              |             +----------------+
                              |             |    Database     |
                              |             |   (Orders DB)  |
                              |             +----------------+
                              |                     |
                              |                     |
                              |                     v
                              |           +-------------------+
                              |           |   User Profiles    |
                              |           +-------------------+
                              |                     |
  +-----------------+          |                     |
  | Delivery System  | <-------|                     |
  +-----------------+          |                     |
                              +---------------------+
                             |       Delivery DB    |
                             +---------------------+
                                       |
                                       v
                               +------------------+
                               |     Real-time     |
                               |   Notification     |
                               +------------------+
```

---

This document encapsulates the various components and data flow of Zepto's logistics system, ensuring clarity in operations and data management practices.